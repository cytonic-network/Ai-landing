---
import Globe from '@assets/icons/globe.svg';
import NetworkText1 from '@assets/icons/networkStatus1.svg';
import NetworkText2 from '@assets/icons/networkStatus2.svg';
import Rocket from '@assets/icons/rocket.svg';
import TwoChecks from '@assets/icons/twoChecks.svg';
---

<section
    class="relative bg-main-gray h-[713px] lg:h-[983px] w-full rounded-[40px] md:rounded-[72px] flex justify-center overflow-hidden max-w-[1200px] mx-auto mb-20 md:mb-50"
>
    <div class="-z-0 absolute w-full flex flex-col h-full justify-between">
        <NetworkText1 />
        <div class="ml-auto">
            <NetworkText2 />
        </div>
    </div>

    <div
        class="pt-[74px] relative lg:pt-20 lg:px-10 lg:pb-[82px] flex flex-col items-center gap-[96px] lg:gap-[258px] w-full"
    >
        <div class="flex items-center flex-col gap-2 text-white font-medium">
            <p class="text-[24px]">03</p>
            <span class="text-[18px]">/ Network status</span>
        </div>

        <div class="w-full max-w-full flex lg:items-center lg:justify-center">
            <div class="hidden lg:flex gap-4 items-start justify-center">
                <div
                    class="bg-white pt-6 lg:pt-0 rounded-[24px] w-[332px] h-[370px] lg:h-[504px] lg:w-[363px] flex justify-center relative"
                >
                    <div class="absolute lg:block hidden -top-6">
                        <TwoChecks />
                    </div>
                    <div
                        class="h-full pb-6 w-full px-6 flex flex-col justify-between"
                    >
                        <div class="text-center flex flex-col gap-6">
                            <p
                                class="font-medium text-[24px] lg:mt-30 uppercase"
                            >
                                Layer 1 Testnet
                            </p>
                            <span class="leading-[120%] text-[#939393]">
                                Initial EVM and SVM execution<br /> environments
                                are deployed on the<br /> Cytonic Layer 1 Testnet
                            </span>
                        </div>

                        <div class="flex flex-col gap-2">
                            <button
                                type="button"
                                onclick="window.location.href='https://github.com/cytonic-network/cytonic-l1-testnet-validator'"
                                class="cursor-pointer p-4 pr-2 w-full border border-[#E8E8E8] rounded-[16px] group flex justify-between hover:bg-[#F5F5F5] transition-all duration-200"
                            >
                                <div
                                    class="text-[18px] font-medium leading-[130%]"
                                >
                                    <p>Layer 1</p>
                                    <span class="text-[#939393]">10, 000</span>
                                </div>

                                <div class="flex items-end">
                                    <div
                                        class="w-10 h-10 bg-gray-200 group-hover:bg-black rounded-lg flex items-center justify-center transition-all duration-200"
                                    >
                                        <svg
                                            class="w-6 h-6 text-white"
                                            fill="none"
                                            stroke="currentColor"
                                            viewBox="0 0 24 24"
                                        >
                                            <path
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M7 17l9.2-9.2M17 17V7H7"
                                            ></path>
                                        </svg>
                                    </div>
                                </div>
                            </button>
                            <div class="flex gap-2">
                                <button
                                    type="button"
                                    onclick="window.location.href='https://www.cytonic.com/svm'"
                                    class="cursor-pointer p-4 pr-2 w-full border border-[#E8E8E8] rounded-[16px] group flex justify-between hover:bg-[#F5F5F5] transition-all duration-200"
                                >
                                    <div
                                        class="text-[18px] text-left font-medium leading-[130%]"
                                    >
                                        <p>SVM</p>
                                        <span class="text-[#939393]"
                                            >30, 000</span
                                        >
                                    </div>

                                    <div class="flex items-end">
                                        <div
                                            class="w-10 h-10 bg-gray-200 group-hover:bg-black rounded-lg flex items-center justify-center transition-all duration-200"
                                        >
                                            <svg
                                                class="w-6 h-6 text-white"
                                                fill="none"
                                                stroke="currentColor"
                                                viewBox="0 0 24 24"
                                            >
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    stroke-width="2"
                                                    d="M7 17l9.2-9.2M17 17V7H7"
                                                ></path>
                                            </svg>
                                        </div>
                                    </div>
                                </button>
                                <button
                                    type="button"
                                    onclick="window.location.href='https://www.cytonic.com/evm'"
                                    class="cursor-pointer p-4 pr-2 w-full border border-[#E8E8E8] rounded-[16px] group flex justify-between hover:bg-[#F5F5F5] transition-all duration-200"
                                >
                                    <div
                                        class="text-left text-[18px] font-medium leading-[130%]"
                                    >
                                        <p>EVM</p>
                                        <span class="text-[#939393]"
                                            >40, 000</span
                                        >
                                    </div>

                                    <div class="flex items-end">
                                        <div
                                            class="w-10 h-10 bg-gray-200 group-hover:bg-black rounded-lg flex items-center justify-center transition-all duration-200"
                                        >
                                            <svg
                                                class="w-6 h-6 text-white"
                                                fill="none"
                                                stroke="currentColor"
                                                viewBox="0 0 24 24"
                                            >
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    stroke-width="2"
                                                    d="M7 17l9.2-9.2M17 17V7H7"
                                                ></path>
                                            </svg>
                                        </div>
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div
                    class="bg-white pt-6 lg:pt-0 rounded-[24px] w-[332px] h-[370px] lg:h-[504px] lg:w-[363px] flex justify-center relative -mt-[71px] px-6"
                >
                    <div class="lg:absolute lg:block hidden -top-18">
                        <Rocket />
                    </div>
                    <div class="text-center flex flex-col gap-6">
                        <p
                            class="font-medium text-[24px] lg:mt-30 uppercase leading-[110%]"
                        >
                            Lightwave<br /> Network Upgrade
                        </p>
                        <span class="leading-[120%] text-[#939393]">
                            The upcoming Lightwave release will upgrade our
                            current EVM and SVM network extensions to allow for
                            increased performance and introduce two new network
                            extensions featuring MoveVM and CosmWASM
                        </span>
                    </div>
                </div>

                <div
                    class="bg-white pt-6 lg:pt-0 rounded-[24px] w-[332px] h-[370px] lg:h-[504px] lg:w-[363px] flex justify-center relative px-6"
                >
                    <div class="lg:absolute lg:block -top-22 hidden">
                        <Globe />
                    </div>
                    <div class="text-center flex flex-col gap-6">
                        <p
                            class="font-medium text-[24px] lg:mt-30 uppercase leading-[110%]"
                        >
                            Unified User<br /> Experience
                        </p>
                        <span class="leading-[120%] text-[#939393]">
                            Lightwave sets the stage for native cross-VM
                            communication. EVM, SVM, MoveVM, and CosmWASM will
                            feel like one VM. Creators gain composability; users
                            have zero broken flows. Rapid upgrades will keep
                            sanding friction until Cytonic feels effortless
                        </span>
                    </div>
                </div>
            </div>

            <div class="lg:hidden relative pb-4 pt-10 -mt-10 w-full">
                <div
                    id="info-carousel-container"
                    class="flex gap-4 md:overflow-x-scroll md:h-[430px] md:pt-10 md:px-4 transition-transform duration-300 ease-in-out w-full md:w-auto"
                >
                    <!-- Card 1 - Layer 1 Testnet -->
                    <div class="w-full md:w-[332px] flex-shrink-0 px-4 md:px-0">
                        <div
                            class="bg-white pt-6 rounded-[24px] h-[370px] flex justify-center flex-col px-2 pb-4 gap-[60px]"
                        >
                            <div
                                class="text-center flex flex-col gap-6 px-4 md:px-6"
                            >
                                <p class="font-medium text-[24px] uppercase">
                                    Layer 1 Testnet
                                </p>
                                <span
                                    class="leading-[120%] text-[#939393] whitespace-nowrap"
                                >
                                    Initial EVM and SVM execution<br /> environments
                                    are deployed on the<br /> Cytonic Layer 1 Testnet
                                </span>
                            </div>

                            <div class="flex flex-col gap-2">
                                <button
                                    type="button"
                                    onclick="window.location.href='https://github.com/cytonic-network/cytonic-l1-testnet-validator'"
                                    class="cursor-pointer p-4 pr-2 w-full border border-[#E8E8E8] rounded-[16px] group flex justify-between hover:bg-[#F5F5F5] transition-all duration-200"
                                >
                                    <div
                                        class="text-[18px] font-medium leading-[130%]"
                                    >
                                        <p>Layer 1</p>
                                        <span class="text-[#939393]"
                                            >10, 000</span
                                        >
                                    </div>

                                    <div class="flex items-end">
                                        <div
                                            class="w-10 h-10 bg-black rounded-lg flex items-center justify-center transition-all duration-200"
                                        >
                                            <svg
                                                class="w-6 h-6 text-white"
                                                fill="none"
                                                stroke="currentColor"
                                                viewBox="0 0 24 24"
                                            >
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    stroke-width="2"
                                                    d="M7 17l9.2-9.2M17 17V7H7"
                                                ></path>
                                            </svg>
                                        </div>
                                    </div>
                                </button>
                                <div class="flex gap-2">
                                    <button
                                        type="button"
                                        onclick="window.location.href='https://www.cytonic.com/svm'"
                                        class="cursor-pointer p-4 pr-2 w-full border border-[#E8E8E8] rounded-[16px] group flex justify-between hover:bg-[#F5F5F5] transition-all duration-200"
                                    >
                                        <div
                                            class="text-[18px] text-left font-medium leading-[130%]"
                                        >
                                            <p>SVM</p>
                                            <span class="text-[#939393]"
                                                >30, 000</span
                                            >
                                        </div>

                                        <div class="flex items-end">
                                            <div
                                                class="w-10 h-10 bg-black rounded-lg flex items-center justify-center transition-all duration-200"
                                            >
                                                <svg
                                                    class="w-6 h-6 text-white"
                                                    fill="none"
                                                    stroke="currentColor"
                                                    viewBox="0 0 24 24"
                                                >
                                                    <path
                                                        stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                        stroke-width="2"
                                                        d="M7 17l9.2-9.2M17 17V7H7"
                                                    ></path>
                                                </svg>
                                            </div>
                                        </div>
                                    </button>
                                    <button
                                        type="button"
                                        onclick="window.location.href='https://www.cytonic.com/evm'"
                                        class="cursor-pointer p-4 pr-2 w-full border border-[#E8E8E8] rounded-[16px] group flex justify-between hover:bg-[#F5F5F5] transition-all duration-200"
                                    >
                                        <div
                                            class="text-left text-[18px] font-medium leading-[130%]"
                                        >
                                            <p>EVM</p>
                                            <span class="text-[#939393]"
                                                >40, 000</span
                                            >
                                        </div>

                                        <div class="flex items-end">
                                            <div
                                                class="w-10 h-10 bg-black rounded-lg flex items-center justify-center transition-all duration-200"
                                            >
                                                <svg
                                                    class="w-6 h-6 text-white"
                                                    fill="none"
                                                    stroke="currentColor"
                                                    viewBox="0 0 24 24"
                                                >
                                                    <path
                                                        stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                        stroke-width="2"
                                                        d="M7 17l9.2-9.2M17 17V7H7"
                                                    ></path>
                                                </svg>
                                            </div>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Card 2 - Lightwave Network Upgrade -->
                    <div class="w-full md:w-[332px] flex-shrink-0 px-4 md:px-0">
                        <div
                            class="bg-white pt-6 rounded-[24px] h-[370px] flex justify-center md:-mt-10"
                        >
                            <div
                                class="text-center flex flex-col gap-6 px-4 md:px-6"
                            >
                                <p
                                    class="font-medium text-[24px] uppercase leading-[110%]"
                                >
                                    Lightwave<br /> Network Upgrade
                                </p>
                                <span class="leading-[120%] text-[#939393]">
                                    The upcoming Lightwave release will upgrade
                                    our current EVM and SVM network extensions
                                    to allow for increased performance and
                                    introduce two new network extensions
                                    featuring MoveVM and CosmWASM
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Card 3 - Unified User Experience -->
                    <div class="w-full md:w-[332px] flex-shrink-0 px-4 md:px-0">
                        <div
                            class="bg-white pt-6 rounded-[24px] h-[370px] flex justify-center"
                        >
                            <div
                                class="text-center flex flex-col gap-6 px-4 md:px-6"
                            >
                                <p
                                    class="font-medium text-[24px] uppercase leading-[110%]"
                                >
                                    Unified User<br /> Experience
                                </p>
                                <span class="leading-[120%] text-[#939393]">
                                    Lightwave sets the stage for native cross-VM
                                    communication. EVM, SVM, MoveVM, and
                                    CosmWASM will feel like one VM. Creators
                                    gain composability; users have zero broken
                                    flows. Rapid upgrades will keep sanding
                                    friction until Cytonic feels effortless
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="justify-center mt-6 md:hidden flex space-x-[65px]">
                    <button
                        class="w-4 h-4 rounded-full info-carousel-dot border-1 border-[#646464] active relative"
                        data-slide="0"
                        ><div
                            class="w-[65px] h-[1px] bg-[#646464] absolute -right-[66px]"
                        >
                        </div>
                        <p
                            class="absolute text-white text-[18px] font-medium leading-[120%] top-4 -left-3"
                        >
                            Past
                        </p></button
                    >
                    <button
                        class="w-4 h-4 bg-[#3C3C3C] rounded-full info-carousel-dot border-1 border-[#646464] relative"
                        data-slide="1"
                    >
                        <div
                            class="w-[65px] h-[1px] bg-[#646464] absolute -right-[66px]"
                        >
                        </div>
                        <p
                            class="absolute text-white text-[18px] font-medium leading-[120%] top-4 -left-7"
                        >
                            Current
                        </p></button
                    >
                    <button
                        class="w-4 h-4 bg-[#3C3C3C] rounded-full info-carousel-dot border-1 border-[#646464] relative"
                        data-slide="2"
                    >
                        <p
                            class="absolute text-white text-[18px] font-medium leading-[120%] top-4 -left-5"
                        >
                            Future
                        </p></button
                    >
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // Initialize only on mobile
    function initCarousel() {
        const isMobile = window.innerWidth < 768;

        if (isMobile) {
            let currentInfoSlide = 0;
            const totalInfoSlides = 3;
            const infoContainer = document.getElementById(
                "info-carousel-container",
            );
            const infoDots = document.querySelectorAll(".info-carousel-dot");
            const slides = document.querySelectorAll(
                "#info-carousel-container > div",
            );

            function calculateSlideWidth() {
                const container = infoContainer.parentElement;
                const containerStyle = window.getComputedStyle(container);
                const paddingLeft = parseFloat(containerStyle.paddingLeft);
                const paddingRight = parseFloat(containerStyle.paddingRight);

                return window.innerWidth - paddingLeft - paddingRight + 16;
            }

            function updateInfoCarousel(slideIndex) {
                const slideWidth = calculateSlideWidth();
                const translateX = -slideIndex * slideWidth;
                infoContainer.style.transform = `translateX(${translateX}px)`;

                // Update dots
                infoDots.forEach((dot, index) => {
                    if (index === slideIndex) {
                        dot.classList.add("active");
                        dot.classList.remove("bg-[#3C3C3C]");
                        dot.classList.add("bg-[#3C3C3C]");
                    } else {
                        dot.classList.remove("active");
                        dot.classList.remove("bg-[#3C3C3C]");
                        dot.classList.add("bg-[#3C3C3C]");
                    }
                });
            }

            // Устанавливаем правильную ширину для каждого слайда
            updateInfoCarousel(currentInfoSlide);

            // Обработчики событий
            infoDots.forEach((dot, index) => {
                dot.addEventListener("click", () => {
                    currentInfoSlide = index;
                    updateInfoCarousel(currentInfoSlide);
                });
            });

            let infoStartX = 0;
            let isInfoDragging = false;

            infoContainer.addEventListener("touchstart", (e) => {
                infoStartX = e.touches[0].clientX;
                isInfoDragging = true;
            });

            infoContainer.addEventListener("touchmove", (e) => {
                if (!isInfoDragging) return;
                e.preventDefault();

                // Плавное перемещение при драге
                const currentX = e.touches[0].clientX;
                const diff = infoStartX - currentX;
                const slideWidth = calculateSlideWidth();
                const currentPosition = -currentInfoSlide * slideWidth;
                infoContainer.style.transform = `translateX(${currentPosition - diff}px)`;
            });

            infoContainer.addEventListener("touchend", (e) => {
                if (!isInfoDragging) return;
                isInfoDragging = false;

                const endX = e.changedTouches[0].clientX;
                const diff = infoStartX - endX;
                const slideWidth = calculateSlideWidth();

                if (Math.abs(diff) > 50) {
                    if (diff > 0 && currentInfoSlide < totalInfoSlides - 1) {
                        currentInfoSlide++;
                    } else if (diff < 0 && currentInfoSlide > 0) {
                        currentInfoSlide--;
                    }
                }

                updateInfoCarousel(currentInfoSlide);
            });

            window.addEventListener("resize", () => {
                if (window.innerWidth >= 768) {
                    infoContainer.style.transform = "none";
                    slides.forEach((slide) => {
                        slide.style.width = "";
                    });
                    infoContainer.style.width = "";
                } else {
                    setupSlides();
                    updateInfoCarousel(currentInfoSlide);
                }
            });
        }
    }

    // Initialize on load and on resize
    document.addEventListener("DOMContentLoaded", initCarousel);
    window.addEventListener("resize", initCarousel);
</script>

<style>
    .info-carousel-dot.active {
        background-color: white;
    }

    .md\:overflow-x-auto::-webkit-scrollbar {
        display: none;
    }
    .md\:overflow-x-auto {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
</style>
